---
title: merge two table
author: geebbon
date: '2018-02-23'
slug: merge-two-table
categories:
  - r
tags:
  - merge
  - r
  - rbind
---

![Header](../../static/img/headers/keepgoing.png)

The question is how to merge two tables, it is easy to use `merge`.
However, it is not easy to merge because the two table have different sample sizes and we want to keep all of them.

```{r echo=FALSE, message=FALSE, warning=FALSE, paged.print=TRUE}
name <- paste("name_",letters,sep="")
name_1 <- sample(name, 15)
name_2 <- sample(name, 10)
in_1_notin2 <- !(name_1 %in% name_2)
in_2_notin1 <- !(name_2 %in% name_1)
t_1 <- data.frame("name"=name_1,"plot1"=1:15 )
t_2 <- data.frame("name"=name_2,"plot2"=1:10 )
knitr::kable(t_1,caption="Some names not in table 2")
knitr::kable(t_2,caption="Some names not in table 1")
```

Now we have problems, some names exist in table 1 but not in table 2, and vice verse. 

```{r echo=TRUE, message=FALSE, warning=FALSE}
library(reshape2)
t_1_m <- melt(t_1,value.name = "plot")
t_2_m <- melt(t_2,value.name = "plot")
t_3_m <- rbind(t_1_m, t_2_m)
```
```{r echo=FALSE, message=FALSE, warning=FALSE, paged.print=FALSE}
knitr::kable(t_3_m,caption="we rbind the two tables")
```

`merge` does not match our aim, so we just bind the table and creat new tables for the samples which not occur Table 1 and Table 2.
Next step, we find the names not in both tables and creat new variables.

```{r echo=TRUE, message=FALSE, warning=FALSE, paged.print=FALSE}
n1 <- t_3_m[t_3_m$name %in% name_1[in_1_notin2],]$name
l1 <- length(n1)
t1 <- data.frame("name"=n1, "variable" = c(rep("plot2",l1)),"plot" =rep(0,l1))

n2 <- t_3_m[t_3_m$name %in% name_2[in_2_notin1],]$name
l2 <- length(n2)
t2 <- data.frame("name"=n2, "variable" = c(rep("plot1",l2)), "plot"=rep(0,l2))

tab.f <- rbind(t_3_m,t1,t2)
```

```{r echo=FALSE, message=FALSE, warning=FALSE, paged.print=FALSE}
knitr::kable(tab.f,caption="Finally, here we go")
```

And finally, here we go!

